<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyTube Pro Launcher</title>
    <style>
        :root { --yt-red: #ff0000; --bg-black: #0f0f0f; --card-bg: #1e1e1e; }
        body { font-family: 'Roboto', Arial, sans-serif; background-color: var(--bg-black); color: white; margin: 0; overflow-x: hidden; }

        /* BUSCADOR FIJO */
        .header { position: fixed; top: 0; width: 100%; background: var(--bg-black); z-index: 1000; padding: 10px 0; border-bottom: 1px solid #333; }
        .search-container { display: flex; align-items: center; background: #222; margin: 0 15px; padding: 8px 15px; border-radius: 20px; border: 1px solid #444; }
        input { flex: 1; background: transparent; border: none; color: white; outline: none; font-size: 16px; }

        /* SECCIONES (Scroll Horizontal) */
        .sections-bar { display: flex; overflow-x: auto; padding: 60px 10px 10px; gap: 10px; scrollbar-width: none; }
        .sections-bar::-webkit-scrollbar { display: none; }
        .chip { background: #272727; padding: 8px 16px; border-radius: 8px; font-size: 14px; white-space: nowrap; cursor: pointer; border: 1px solid #3f3f3f; transition: 0.2s; }
        .chip:active { background: #fff; color: #000; }

        /* CASCADA DE CAR√ÅTULAS */
        .feed { padding: 15px; display: flex; flex-direction: column; gap: 20px; }
        .card { background: var(--card-bg); border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.5); border: 1px solid #333; }
        .card-thumb { height: 180px; background: linear-gradient(45deg, #222, #444); display: flex; align-items: center; justify-content: center; font-size: 40px; color: var(--yt-red); }
        .card-info { padding: 12px; }
        .card-title { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
        .card-meta { font-size: 12px; color: #aaa; }

        .empty-msg { text-align: center; color: #666; margin-top: 50px; padding: 20px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="search-container">
            <input type="text" id="mainSearch" placeholder="Buscar en YouTube..." onkeypress="if(event.key === 'Enter') procesarBusqueda(this.value)">
            <span onclick="procesarBusqueda(document.getElementById('mainSearch').value)" style="cursor:pointer">üîç</span>
        </div>
    </div>

    <div class="sections-bar">
        <div class="chip" onclick="procesarBusqueda('Todo')">Todo</div>
        <div class="chip" onclick="procesarBusqueda('Musica')">M√∫sica</div>
        <div class="chip" onclick="procesarBusqueda('Vallenato')">Vallenato</div>
        <div class="chip" onclick="procesarBusqueda('Mix 2024')">Mixes</div>
        <div class="chip" onclick="procesarBusqueda('Gaming')">Gaming</div>
        <div class="chip" onclick="procesarBusqueda('Noticias')">Noticias</div>
    </div>

    <div id="feed" class="feed">
        </div>

    <script>
        // Al cargar la p√°gina, dibujar el historial guardado
        window.onload = mostrarHistorial;

        function procesarBusqueda(termino) {
            if (!termino) return;

            // 1. Guardar en el historial (LocalStorage)
            let historial = JSON.parse(localStorage.getItem('yt_history')) || [];
            // Evitar duplicados: si ya existe, lo quitamos para ponerlo de primero
            historial = historial.filter(item => item.texto !== termino);
            historial.unshift({ texto: termino, fecha: new Date().toLocaleDateString() });
            localStorage.setItem('yt_history', JSON.stringify(historial));

            // 2. Abrir YouTube en el navegador
            const url = "https://m.youtube.com/results?search_query=" + encodeURIComponent(termino);
            window.location.href = url;
        }

        function mostrarHistorial() {
            const feed = document.getElementById('feed');
            const historial = JSON.parse(localStorage.getItem('yt_history')) || [];

            if (historial.length === 0) {
                feed.innerHTML = '<div class="empty-msg">Tu historial de b√∫squeda aparecer√° aqu√≠ como car√°tulas.</div>';
                return;
            }

            feed.innerHTML = '';
            historial.forEach(item => {
                const card = `
                    <div class="card" onclick="procesarBusqueda('${item.texto}')">
                        <div class="card-thumb">‚ñ∂</div>
                        <div class="card-info">
                            <div class="card-title">${item.texto}</div>
                            <div class="card-meta">Buscado el ${item.fecha} ‚Ä¢ Toca para volver a ver</div>
                        </div>
                    </div>
                `;
                feed.innerHTML += card;
            });
        }
    </script>
</body>
</html>
