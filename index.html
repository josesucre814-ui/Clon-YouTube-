<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyTube Pro Launcher</title>
    <style>
        :root { --yt-red: #ff0000; --bg-black: #0f0f0f; --card-bg: #1e1e1e; --text-gray: #aaa; }
        body { font-family: 'Roboto', sans-serif; background-color: var(--bg-black); color: white; margin: 0; padding-top: 110px; }

        /* HEADER */
        .header { position: fixed; top: 0; width: 100%; background: var(--bg-black); z-index: 1000; padding: 10px 0; }
        .search-bar { 
            display: flex; align-items: center; background: #222; margin: 0 12px; padding: 4px 14px; 
            border-radius: 24px; border: 1px solid #333; height: 36px;
        }
        input { 
            flex: 1; background: transparent; border: none; color: white; 
            outline: none; font-size: 16px;
        }
        
        /* ICONOS LUPA Y X */
        .yt-search-icon { width: 20px; height: 20px; fill: white; opacity: 0.9; }
        .clear-btn { 
            padding: 0 10px; color: var(--text-gray); font-size: 20px; 
            cursor: pointer; display: none;
        }

        /* SECCIONES (PÍLDORAS) */
        .sections-bar { 
            position: fixed; top: 56px; width: 100%; display: flex; overflow-x: auto; 
            padding: 8px 12px; gap: 8px; scrollbar-width: none; background: var(--bg-black); z-index: 999;
        }
        .sections-bar::-webkit-scrollbar { display: none; }
        .chip { 
            background: #272727; padding: 6px 14px; border-radius: 8px; 
            font-size: 14px; white-space: nowrap; border: 1px solid #3f3f3f; 
        }

        /* FEED DE CARÁTULAS */
        .feed { padding: 10px 12px; display: flex; flex-direction: column; gap: 20px; }
        .card { border-radius: 12px; overflow: hidden; text-decoration: none; color: white; }
        .card-thumb { 
            width: 100%; height: 200px; border-radius: 12px; 
            background-size: cover; background-position: center;
            background-color: #222; position: relative;
            box-shadow: inset 0 -40px 60px rgba(0,0,0,0.6);
        }
        .play-overlay {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.5); border-radius: 50%; width: 50px; height: 50px;
            display: flex; align-items: center; justify-content: center;
        }
        .card-info { padding: 10px 4px; }
        .card-title { font-size: 16px; font-weight: 500; margin: 0; }
        .card-meta { font-size: 12px; color: var(--text-gray); margin-top: 4px; display: block; }
    </style>
</head>
<body>

    <div class="header">
        <div class="search-bar">
            <input type="text" id="mainSearch" placeholder="Buscar en YouTube..." 
                   oninput="checkInput(this.value)"
                   onkeypress="if(event.key === 'Enter') buscar(this.value)">
            
            <span id="clearBtn" class="clear-btn" onclick="limpiar()">✕</span>
            
            <div onclick="buscar(document.getElementById('mainSearch').value)">
                <svg class="yt-search-icon" viewBox="0 0 24 24"><path d="M20.87,20.17l-5.59-5.59C16.35,13.35,17,11.75,17,10c0-3.87-3.13-7-7-7s-7,3.13-7,7s3.13,7,7,7c1.75,0,3.35-0.65,4.58-1.71 l5.59,5.59L20.87,20.17z M10,16c-3.31,0-6-2.69-6-6s2.69-6,6-6s6,2.69,6,6S13.31,16,10,16z"></path></svg>
            </div>
        </div>
    </div>

    <div class="sections-bar">
        <div class="chip" onclick="buscar('Todo')">Todo</div>
        <div class="chip" onclick="buscar('Música')">Música</div>
        <div class="chip" onclick="buscar('Vallenato')">Vallenato</div>
        <div class="chip" onclick="buscar('Mixes')">Mixes</div>
        <div class="chip" onclick="buscar('En vivo')">En vivo</div>
    </div>

    <div id="feed" class="feed"></div>

    <script>
        // Banco de imágenes seguras para que nunca fallen
        const images = {
            'todo': 'https://images.unsplash.com/photo-1611162617474-5b21e879e113?w=500&q=80',
            'música': 'https://images.unsplash.com/photo-1470225620780-dba8ba36b745?w=500&q=80',
            'vallenato': 'https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?w=500&q=80',
            'mixes': 'https://images.unsplash.com/photo-1514525253344-f814d074e015?w=500&q=80',
            'películas': 'https://images.unsplash.com/photo-1485846234645-a62644f84728?w=500&q=80',
            'default': 'https://images.unsplash.com/photo-1516280440614-37939bbacd81?w=500&q=80'
        };

        window.onload = mostrarHistorial;

        function checkInput(v) {
            document.getElementById('clearBtn').style.display = v ? 'block' : 'none';
        }

        function limpiar() {
            document.getElementById('mainSearch').value = '';
            checkInput('');
        }

        function buscar(t) {
            if (!t) return;
            let historial = JSON.parse(localStorage.getItem('yt_history')) || [];
            historial = historial.filter(i => i.texto !== t);
            
            // Seleccionar imagen del banco o usar default
            const key = t.toLowerCase();
            const img = images[key] || images['default'];
            
            historial.unshift({ texto: t, fecha: new Date().toLocaleDateString(), img: img });
            localStorage.setItem('yt_history', JSON.stringify(historial.slice(0,10))); // Guardar últimos 10
            
            window.location.href = "https://m.youtube.com/results?search_query=" + encodeURIComponent(t);
        }

        function mostrarHistorial() {
            const feed = document.getElementById('feed');
            const historial = JSON.parse(localStorage.getItem('yt_history')) || [];
            feed.innerHTML = historial.length ? '' : '<p style="text-align:center;color:#444;margin-top:50px">Historial vacío</p>';

            historial.forEach(item => {
                feed.innerHTML += `
                    <div class="card" onclick="buscar('${item.texto}')">
                        <div class="card-thumb" style="background-image: url('${item.img}')">
                            <div class="play-overlay">
                                <svg fill="white" width="30" height="30" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                        <div class="card-info">
                            <h3 class="card-title">${item.texto}</h3>
                            <span class="card-meta">Buscado el ${item.fecha} • Toca para abrir</span>
                        </div>
                    </div>
                `;
            });
        }
    </script>
</body>
</html>
